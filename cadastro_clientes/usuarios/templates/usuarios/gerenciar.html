{% extends "clientes/base.html" %}
{% block content %}
<h2 style="text-align:center; font-weight:600; margin-bottom:24px; color:#1976d2;">Gerenciar Usuários</h2>
<div style="max-width: 1000px; margin: 0 auto; background: #f9fbfd; border-radius: 10px; box-shadow: 0 1px 8px rgba(30,40,90,0.07); padding: 32px 24px;">
    <table style="width:100%; border-collapse:separate; border-spacing:0 8px;">
        <thead>
            <tr style="background:#eaf4fb; color:#1976d2;">
                <th style="padding:10px 8px; border-radius:8px 0 0 8px;">Nome</th>
                <th style="padding:10px 8px;">E-mail</th>
                <th style="padding:10px 8px;">Data de Cadastro</th>
                <th style="padding:10px 8px;">Último Login</th>
                <th style="padding:10px 8px;">Status</th>
                <th style="padding:10px 8px; border-radius:0 8px 8px 0;">Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr style="background: #fff; box-shadow: 0 1px 4px rgba(30,40,90,0.04); border-radius:8px;">
                <td style="padding:10px 8px; font-weight:500; color:#1976d2;">{{ user.username }}</td>
                <td style="padding:10px 8px; color:#444;">{{ user.email }}</td>
                <td style="padding:10px 8px; color:#666;">{{ user.profile.created_at|date:"d/m/Y H:i" }}</td>
                <td style="padding:10px 8px; color:#666;">{% if user.last_login %}{{ user.last_login|date:"d/m/Y H:i" }}{% else %}<span style="color:#bbb;">Nunca</span>{% endif %}</td>
                <td style="padding:10px 8px;">
                    {% if user.profile.is_blocked %}
                        <span style="color:#d32f2f; font-weight:600; background:#fdeaea; border-radius:6px; padding:3px 10px;">Bloqueado</span>
                    {% else %}
                        <span style="color:#0a7d4f; font-weight:600; background:#e6f7ee; border-radius:6px; padding:3px 10px;">Ativo</span>
                    {% endif %}
                </td>
                <td style="padding:10px 8px;">
                    {% if not user.is_superuser %}
                        <div style="display:flex; gap:8px; flex-wrap:nowrap; overflow-x:auto;">
                            {% if user.profile.is_blocked %}
                                <a href="{% url 'usuarios:desbloquear_usuario' user.id %}" style="color:#1976d2; background:#eaf4fb; border-radius:5px; padding:5px 12px; font-weight:500; text-decoration:none;">Desbloquear</a>
                            {% else %}
                                <a href="{% url 'usuarios:bloquear_usuario' user.id %}" style="color:#d32f2f; background:#fdeaea; border-radius:5px; padding:5px 12px; font-weight:500; text-decoration:none;">Bloquear</a>
                            {% endif %}
                            <a href="{% url 'usuarios:resetar_senha_usuario' user.id %}" style="color:#1976d2; background:#eaf4fb; border-radius:5px; padding:5px 12px; font-weight:500; text-decoration:none;">Resetar Senha</a>
                            <a href="{% url 'usuarios:deletar_usuario' user.id %}" style="color:#fff; background:#d32f2f; border-radius:5px; padding:5px 12px; font-weight:500; text-decoration:none;" onclick="return confirm('Tem certeza que deseja excluir este usuário? Esta ação não pode ser desfeita.');">Excluir</a>
                        </div>
                    {% else %}
                        <span style="color:#888; background:#f4f6f8; border-radius:5px; padding:5px 12px; font-weight:500;">Admin</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="6" style="text-align:center; color:#888; padding:24px 0;">Nenhum usuário encontrado.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %} 